<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Birthday Surprise â€” Ash25</title>

<!-- canvas-confetti CDN -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
  :root{
    --bg1: #ffe9f0;
    --bg2: #e9f4ff;
    --accent: #ff4fa1;
  }
  body{
    margin:0;
    font-family:system-ui;
    background:linear-gradient(135deg,var(--bg1),var(--bg2));
    display:flex;
    align-items:center;
    justify-content:center;
    height:100vh;
    padding:18px;
    overflow:hidden;
  }
  .card{
    width:100%;
    max-width:700px;
    background:#ffffffdd;
    backdrop-filter:blur(6px);
    padding:22px;
    border-radius:18px;
    text-align:center;
    box-shadow:0 20px 40px rgba(0,0,0,0.15);
  }
  h1{margin:0 0 6px;font-size:22px;color:#1b2330}
  .lead{margin:0 0 14px;color:#4a5463}
  input{
    width:88%;max-width:380px;
    padding:12px;
    border-radius:10px;
    border:1px solid #d3d8e0;
    font-size:17px;
    outline:none;
  }
  button{
    margin-top:14px;
    padding:12px 18px;
    border-radius:12px;
    border:0;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
  }
  .primary{background:linear-gradient(90deg,#ff4fa1,#7c4dff);color:#fff;}
  .secondary{background:#ffffff;color:#444;box-shadow:0 4px 14px rgba(0,0,0,0.1);}
  #msg{opacity:0;transform:translateY(10px);transition:.5s;margin-top:18px;}
  #msg.show{opacity:1;transform:translateY(0);}
  #confetti-canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:999;}
</style>
</head>

<body>
<canvas id="confetti-canvas"></canvas>

<div class="card">
  <h1>ðŸ”’ Enter the Secret Code</h1>
  <p class="lead">Type the code & tap Unlock</p>

  <input id="codeInput" placeholder="Enter secret code (Ash25)">
  <br>
  <button class="primary" id="unlockBtn">Unlock</button>

  <div id="msg">
    <h2>ðŸŽ‰ HAPPY BIRTHDAY, ASH! ðŸŽ‰</h2>
    <p>Wishing you joy, love and all your favourite moments today. ðŸ’–âœ¨</p>
    <button id="playBtn" class="secondary" style="display:none;margin-top:18px;">ðŸŽµ Tap to play music</button>
  </div>
</div>

<script>
/* CONFIG */
const SECRET = "Ash25";
const AUDIO_URL = "https://raw.githubusercontent.com/Mathumitha122/Music/main/happy-birthday-334876.mp3";

/* Confetti canvas */
const canvas = document.getElementById("confetti-canvas");
canvas.width = innerWidth;
canvas.height = innerHeight;
addEventListener("resize", () => {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
});

/* Continuous confetti */
function burst(){
  confetti({
    particleCount: 30,
    spread: 60,
    origin: { x: Math.random(), y: Math.random() * 0.3 }
  });
}
let confettiLoop=null;
function startConfetti(){
  burst();
  confettiLoop = setInterval(burst, 300);
}

/* Message + audio logic */
const unlockBtn = document.getElementById("unlockBtn");
const codeInput = document.getElementById("codeInput");
const msg = document.getElementById("msg");
const playBtn = document.getElementById("playBtn");

let music = null;

unlockBtn.onclick = () => {
  const val = codeInput.value.trim();
  if(val !== SECRET){
    alert("Wrong code!");
    navigator.vibrate?.(60);
    return;
  }

  msg.classList.add("show");
  startConfetti();
  navigator.vibrate?.(40);

  // create audio object inside user gesture
  music = new Audio(AUDIO_URL);
  music.loop = false;

  // try autoplay
  music.play()
  .then(()=>{
    playBtn.style.display = "none";
  })
  .catch(()=>{
    playBtn.style.display = "inline-block"; // fallback for iPhone
  });

  unlockBtn.disabled = true;
  codeInput.disabled = true;
};

/* Fallback play button */
playBtn.onclick = () => {
  if(music) music.play();
};
</script>

</body>
</html>
